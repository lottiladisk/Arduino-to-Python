{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556  5.003678  5.053702  5.103721  5.153762  5.203782\n",
      "  5.253819  5.303838  5.353877  5.403899  5.453932  5.503951  5.553985\n",
      "  5.604004  5.654044  5.704066  5.754106  5.804126  5.854167  5.904187\n",
      "  5.954216]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556  5.003678  5.053702  5.103721  5.153762  5.203782\n",
      "  5.253819  5.303838  5.353877  5.403899  5.453932  5.503951  5.553985\n",
      "  5.604004  5.654044  5.704066  5.754106  5.804126  5.854167  5.904187\n",
      "  5.954216  6.004645  6.054672  6.104698  6.154724  6.204753  6.254777\n",
      "  6.304811  6.35483   6.404863  6.454883  6.504916  6.554936  6.604969\n",
      "  6.654989  6.70502   6.755039  6.805077  6.855098  6.905135  6.955154]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556  5.003678  5.053702  5.103721  5.153762  5.203782\n",
      "  5.253819  5.303838  5.353877  5.403899  5.453932  5.503951  5.553985\n",
      "  5.604004  5.654044  5.704066  5.754106  5.804126  5.854167  5.904187\n",
      "  5.954216  6.004645  6.054672  6.104698  6.154724  6.204753  6.254777\n",
      "  6.304811  6.35483   6.404863  6.454883  6.504916  6.554936  6.604969\n",
      "  6.654989  6.70502   6.755039  6.805077  6.855098  6.905135  6.955154\n",
      "  7.005252  7.055276  7.105314  7.155334  7.205367  7.255387  7.30542\n",
      "  7.355442  7.405479  7.455499  7.505538  7.555558  7.605597  7.655618\n",
      "  7.705653  7.755672  7.805713  7.855733  7.905768  7.95579 ]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556  5.003678  5.053702  5.103721  5.153762  5.203782\n",
      "  5.253819  5.303838  5.353877  5.403899  5.453932  5.503951  5.553985\n",
      "  5.604004  5.654044  5.704066  5.754106  5.804126  5.854167  5.904187\n",
      "  5.954216  6.004645  6.054672  6.104698  6.154724  6.204753  6.254777\n",
      "  6.304811  6.35483   6.404863  6.454883  6.504916  6.554936  6.604969\n",
      "  6.654989  6.70502   6.755039  6.805077  6.855098  6.905135  6.955154\n",
      "  7.005252  7.055276  7.105314  7.155334  7.205367  7.255387  7.30542\n",
      "  7.355442  7.405479  7.455499  7.505538  7.555558  7.605597  7.655618\n",
      "  7.705653  7.755672  7.805713  7.855733  7.905768  7.95579   8.005883\n",
      "  8.055907  8.105938  8.155964  8.20599   8.256017  8.306045  8.356071\n",
      "  8.406097  8.456123  8.506143  8.556176  8.606198  8.656231  8.70625\n",
      "  8.756288  8.806308  8.856341  8.906363  8.956396]\n",
      "[ 0.        0.050047  0.100067  0.150098  0.200117  0.25015   0.300169\n",
      "  0.350205  0.400227  0.450265  0.500285  0.550318  0.600337  0.650373\n",
      "  0.700393  0.750429  0.800449  0.850486  0.900505  0.950541  1.000669\n",
      "  1.050691  1.10071   1.150743  1.200763  1.250803  1.300822  1.350862\n",
      "  1.400881  1.450907  1.500934  1.550965  1.600994  1.651022  1.701046\n",
      "  1.751074  1.8011    1.85112   1.901139  1.951158  2.001777  2.0518\n",
      "  2.101838  2.15186   2.201893  2.251913  2.301952  2.351973  2.402006\n",
      "  2.452026  2.502059  2.552079  2.602117  2.652139  2.702176  2.752196\n",
      "  2.802229  2.852249  2.902282  2.952303  3.002402  3.052426  3.102465\n",
      "  3.152484  3.202523  3.252545  3.302583  3.352603  3.402642  3.452661\n",
      "  3.502696  3.552717  3.602756  3.652776  3.702802  3.752828  3.802854\n",
      "  3.852883  3.90291   3.952937  4.003048  4.053072  4.103092  4.153125\n",
      "  4.203147  4.25318   4.3032    4.353234  4.403253  4.453286  4.503307\n",
      "  4.55334   4.60336   4.653396  4.703415  4.753448  4.80347   4.853503\n",
      "  4.903523  4.953556  5.003678  5.053702  5.103721  5.153762  5.203782\n",
      "  5.253819  5.303838  5.353877  5.403899  5.453932  5.503951  5.553985\n",
      "  5.604004  5.654044  5.704066  5.754106  5.804126  5.854167  5.904187\n",
      "  5.954216  6.004645  6.054672  6.104698  6.154724  6.204753  6.254777\n",
      "  6.304811  6.35483   6.404863  6.454883  6.504916  6.554936  6.604969\n",
      "  6.654989  6.70502   6.755039  6.805077  6.855098  6.905135  6.955154\n",
      "  7.005252  7.055276  7.105314  7.155334  7.205367  7.255387  7.30542\n",
      "  7.355442  7.405479  7.455499  7.505538  7.555558  7.605597  7.655618\n",
      "  7.705653  7.755672  7.805713  7.855733  7.905768  7.95579   8.005883\n",
      "  8.055907  8.105938  8.155964  8.20599   8.256017  8.306045  8.356071\n",
      "  8.406097  8.456123  8.506143  8.556176  8.606198  8.656231  8.70625\n",
      "  8.756288  8.806308  8.856341  8.906363  8.956396  9.006554  9.056581\n",
      "  9.1066    9.156633  9.206655  9.256688  9.306707  9.35674   9.406759\n",
      "  9.456792  9.506814  9.556851  9.606871  9.656909  9.706929  9.756962\n",
      "  9.806983  9.857022  9.907042  9.957082]\n",
      "[  0.         0.050047   0.100067   0.150098   0.200117   0.25015\n",
      "   0.300169   0.350205   0.400227   0.450265   0.500285   0.550318\n",
      "   0.600337   0.650373   0.700393   0.750429   0.800449   0.850486\n",
      "   0.900505   0.950541   1.000669   1.050691   1.10071    1.150743\n",
      "   1.200763   1.250803   1.300822   1.350862   1.400881   1.450907\n",
      "   1.500934   1.550965   1.600994   1.651022   1.701046   1.751074   1.8011\n",
      "   1.85112    1.901139   1.951158   2.001777   2.0518     2.101838\n",
      "   2.15186    2.201893   2.251913   2.301952   2.351973   2.402006\n",
      "   2.452026   2.502059   2.552079   2.602117   2.652139   2.702176\n",
      "   2.752196   2.802229   2.852249   2.902282   2.952303   3.002402\n",
      "   3.052426   3.102465   3.152484   3.202523   3.252545   3.302583\n",
      "   3.352603   3.402642   3.452661   3.502696   3.552717   3.602756\n",
      "   3.652776   3.702802   3.752828   3.802854   3.852883   3.90291\n",
      "   3.952937   4.003048   4.053072   4.103092   4.153125   4.203147\n",
      "   4.25318    4.3032     4.353234   4.403253   4.453286   4.503307\n",
      "   4.55334    4.60336    4.653396   4.703415   4.753448   4.80347\n",
      "   4.853503   4.903523   4.953556   5.003678   5.053702   5.103721\n",
      "   5.153762   5.203782   5.253819   5.303838   5.353877   5.403899\n",
      "   5.453932   5.503951   5.553985   5.604004   5.654044   5.704066\n",
      "   5.754106   5.804126   5.854167   5.904187   5.954216   6.004645\n",
      "   6.054672   6.104698   6.154724   6.204753   6.254777   6.304811\n",
      "   6.35483    6.404863   6.454883   6.504916   6.554936   6.604969\n",
      "   6.654989   6.70502    6.755039   6.805077   6.855098   6.905135\n",
      "   6.955154   7.005252   7.055276   7.105314   7.155334   7.205367\n",
      "   7.255387   7.30542    7.355442   7.405479   7.455499   7.505538\n",
      "   7.555558   7.605597   7.655618   7.705653   7.755672   7.805713\n",
      "   7.855733   7.905768   7.95579    8.005883   8.055907   8.105938\n",
      "   8.155964   8.20599    8.256017   8.306045   8.356071   8.406097\n",
      "   8.456123   8.506143   8.556176   8.606198   8.656231   8.70625\n",
      "   8.756288   8.806308   8.856341   8.906363   8.956396   9.006554\n",
      "   9.056581   9.1066     9.156633   9.206655   9.256688   9.306707\n",
      "   9.35674    9.406759   9.456792   9.506814   9.556851   9.606871\n",
      "   9.656909   9.706929   9.756962   9.806983   9.857022   9.907042\n",
      "   9.957082  10.007233  10.057257  10.107277  10.157317  10.207336\n",
      "  10.257372  10.307391  10.357417  10.407446  10.457473  10.507503\n",
      "  10.557531  10.607562  10.657582  10.707615  10.757635  10.807665\n",
      "  10.857685  10.907722  10.957743]\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\Lotti\\Anaconda3\\lib\\site-packages\\matplotlib\\backend_bases.py:2453: MatplotlibDeprecationWarning: Using default event loop until function specific to this GUI is implemented\n",
      "  warnings.warn(str, mplDeprecation)\n"
     ]
    }
   ],
   "source": [
    "%matplotlib qt5\n",
    "import socket\n",
    "import matplotlib.pyplot as plt\n",
    "import numpy as np\n",
    "import time\n",
    "\n",
    "def Povezava(port_num = 5021):\n",
    "    \"\"\"\n",
    "    Return server socket connection through selected port.\n",
    "    / Vrne vzpostavitev socket server povezave.\n",
    "\n",
    "    Parameters\n",
    "    -------------\n",
    "    port_num: number of the port. Default is 5021. Must be non-negative.\n",
    "    / port_num: Številka vhodnih vrat. Privzeta so vrata 5021.\n",
    "    Zahteva pozitivno Število.\n",
    "\n",
    "    Returns\n",
    "    -------------\n",
    "    connection and address number.\n",
    "\n",
    "    \"\"\"\n",
    "    serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n",
    "    serversocket.bind((' ', port_num))\n",
    "    serversocket.listen(5)\n",
    "    connection, address = serversocket.accept()\n",
    "\n",
    "    return connection, address\n",
    "\n",
    "\n",
    "def Meritve(tk=10000000):\n",
    "    \"\"\"\"\n",
    "    tk:  Čas, ki ga popisuje meritev\n",
    "    dt:  Čas med podatki\n",
    "    stp: Število podatkov v paketu\n",
    "\n",
    "    Funkcija generira podatke v obliki nizov in jih za tem zelo hitro izriše. Gre za slab približek izrisovanja v\n",
    "    realnem času, saj izvedba izrisa zakasni prejetje naslednjega paketa podatkov.\n",
    "    \"\"\"\n",
    "\n",
    "    conn, add = Povezava()\n",
    "\n",
    "    dt = 50000      #Načeloma bi tukaj prišla komun. Pyt - Ard\n",
    "    stp = 19\n",
    "    i = 1   #Števec paketov\n",
    "\n",
    "    t = np.array([], dtype=int) #Prazen numerični seznam časov\n",
    "    a = np.array([], dtype=int) #Prazen numerični seznam pospeškov\n",
    "\n",
    "    fig, ax = plt.subplots()    #Nov izris\n",
    "    os, = ax.plot(np.linspace(0, stp * dt/1000000, stp), np.random.randint(100, 140, stp)) #Začetno stanje\n",
    "    ax.set_ylim([0,150])\n",
    "\n",
    "    while i <= 1+tk / (dt * stp): #Prejemanje paketov\n",
    "\n",
    "        paket = \"\"    #Prazen paket\n",
    "\n",
    "        buf = conn.recv(4096)\n",
    "\n",
    "        if len(buf) > 0:  #Se izpolni, ce paket ni prazen\n",
    "\n",
    "            paket = buf.decode()\n",
    "            \n",
    "        tocke = paket.split(\"\\n\")   #Ločevanje točk\n",
    "        for tocka in tocke:         #Ločevanje pospeška in časa\n",
    "            if len(tocka) > 1:\n",
    "                y, x = tocka.split('\\t')\n",
    "                t = np.append(t, float(x)/1000000)  #Pripenjanje časov v skupno tabelo\n",
    "                a = np.append(a, int(y))    #Pripenjanje pospeškov v skupno tabelo\n",
    "                \n",
    "        os.set_data((t[(i-1)*stp:(i-1)*stp+stp]-t[0]), a[(i - 1) * stp:(i - 1) * stp + stp])   #Osveževanje grafa\n",
    "        #ax.set_ylim([0,140])                                                                   #Meje y osi\n",
    "        ax.set_xlim((t[(i-1)*stp]-t[0]),(t[(i-1)*stp+stp]-t[0]))                                     #Meje x osi\n",
    "        plt.pause(0.001)\n",
    "\n",
    "        i += 1              #Inkrement števca paketov\n",
    "\n",
    "Meritve()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.5.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
